<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>R interface to NLopt — nloptr • nloptr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="R interface to NLopt — nloptr"><meta name="description" content="nloptr is an R interface to NLopt, a free/open-source library for nonlinear
optimization started by Steven G. Johnson, providing a common interface for a
number of different free optimization routines available online as well as
original implementations of various other algorithms. The NLopt library is
available under the GNU Lesser General Public License (LGPL), and the
copyrights are owned by a variety of authors. Most of the information here
has been taken from
the NLopt website, where
more details are available."><meta property="og:description" content="nloptr is an R interface to NLopt, a free/open-source library for nonlinear
optimization started by Steven G. Johnson, providing a common interface for a
number of different free optimization routines available online as well as
original implementations of various other algorithms. The NLopt library is
available under the GNU Lesser General Public License (LGPL), and the
copyrights are owned by a variety of authors. Most of the information here
has been taken from
the NLopt website, where
more details are available."><meta property="og:image" content="https://astamm.github.io/nloptr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nloptr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nloptr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://astamm.github.io/posts/2024-06-19-nloptr-210/">nloptr 2.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/astamm/nloptr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>R interface to NLopt</h1>
      <small class="dont-index">Source: <a href="https://github.com/astamm/nloptr/blob/master/R/nloptr.R" class="external-link"><code>R/nloptr.R</code></a></small>
      <div class="d-none name"><code>nloptr.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>nloptr is an R interface to NLopt, a free/open-source library for nonlinear
optimization started by Steven G. Johnson, providing a common interface for a
number of different free optimization routines available online as well as
original implementations of various other algorithms. The NLopt library is
available under the GNU Lesser General Public License (LGPL), and the
copyrights are owned by a variety of authors. Most of the information here
has been taken from
<a href="https://nlopt.readthedocs.io/en/latest/" class="external-link">the NLopt website</a>, where
more details are available.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nloptr</span><span class="op">(</span></span>
<span>  <span class="va">x0</span>,</span>
<span>  <span class="va">eval_f</span>,</span>
<span>  eval_grad_f <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lb <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ub <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eval_g_ineq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eval_jac_g_ineq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eval_g_eq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eval_jac_g_eq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x-">x0<a class="anchor" aria-label="anchor" href="#arg-x-"></a></dt>
<dd><p>vector with starting values for the optimization.</p></dd>


<dt id="arg-eval-f">eval_f<a class="anchor" aria-label="anchor" href="#arg-eval-f"></a></dt>
<dd><p>function that returns the value of the objective function. It
can also return gradient information at the same time in a list with
elements "objective" and "gradient" (see below for an example).</p></dd>


<dt id="arg-eval-grad-f">eval_grad_f<a class="anchor" aria-label="anchor" href="#arg-eval-grad-f"></a></dt>
<dd><p>function that returns the value of the gradient of the
objective function. Not all of the algorithms require a gradient.</p></dd>


<dt id="arg-lb">lb<a class="anchor" aria-label="anchor" href="#arg-lb"></a></dt>
<dd><p>vector with lower bounds of the controls (use <code>-Inf</code> for
controls without lower bound), by default there are no lower bounds for any
of the controls.</p></dd>


<dt id="arg-ub">ub<a class="anchor" aria-label="anchor" href="#arg-ub"></a></dt>
<dd><p>vector with upper bounds of the controls (use <code>Inf</code> for
controls without upper bound), by default there are no upper bounds for any
of the controls.</p></dd>


<dt id="arg-eval-g-ineq">eval_g_ineq<a class="anchor" aria-label="anchor" href="#arg-eval-g-ineq"></a></dt>
<dd><p>function to evaluate (non-)linear inequality constraints
that should hold in the solution.  It can also return gradient information
at the same time in a list with elements "constraints" and "jacobian" (see
below for an example).</p></dd>


<dt id="arg-eval-jac-g-ineq">eval_jac_g_ineq<a class="anchor" aria-label="anchor" href="#arg-eval-jac-g-ineq"></a></dt>
<dd><p>function to evaluate the Jacobian of the (non-)linear
inequality constraints that should hold in the solution.</p></dd>


<dt id="arg-eval-g-eq">eval_g_eq<a class="anchor" aria-label="anchor" href="#arg-eval-g-eq"></a></dt>
<dd><p>function to evaluate (non-)linear equality constraints that
should hold in the solution.  It can also return gradient information at
the same time in a list with elements "constraints" and "jacobian" (see
below for an example).</p></dd>


<dt id="arg-eval-jac-g-eq">eval_jac_g_eq<a class="anchor" aria-label="anchor" href="#arg-eval-jac-g-eq"></a></dt>
<dd><p>function to evaluate the Jacobian of the (non-)linear
equality constraints that should hold in the solution.</p></dd>


<dt id="arg-opts">opts<a class="anchor" aria-label="anchor" href="#arg-opts"></a></dt>
<dd><p>list with options. The option "<code>algorithm</code>" is required.
Check the
<a href="https://nlopt.readthedocs.io/en/latest/NLopt_Algorithms/" class="external-link">NLopt
website</a> for a full list of available algorithms. Other options control the
termination conditions (<code>minf_max, ftol_rel, ftol_abs, xtol_rel,</code>
<code>xtol_abs, maxeval, maxtime</code>). Default is <code>xtol_rel</code> = 1e-4. More
information
<a href="https://nlopt.readthedocs.io/en/latest/NLopt_Introduction/#termination-conditions" class="external-link">here</a>. #nolint
A full description of all options is shown by the function
<code><a href="nloptr.print.options.html">nloptr.print.options()</a></code>.</p>
<p>Some algorithms with equality constraints require the option
<code>local_opts</code>, which contains a list with an algorithm and a termination
condition for the local algorithm. See <code><a href="nloptr-package.html">?`nloptr-package`</a></code> for an
example.</p>
<p>The option <code>print_level</code> controls how much output is shown during the
optimization process. Possible values:</p><table class="table table"><tr><td>0 (default)</td><td>no
output</td></tr><tr><td>1</td><td>show iteration number and value of objective function</td></tr><tr><td>2</td><td>1 + show value of (in)equalities</td></tr><tr><td>3</td><td>2 + show value of
controls</td></tr></table><p>The option <code>check_derivatives</code> (default = <code>FALSE</code>) can be used to
run to compare the analytic gradients with finite difference approximations.
The option <code>check_derivatives_print</code> (<code>'all'</code> (default),
<code>'errors'</code>, <code>'none'</code>) controls the output of the derivative
checker, if it is run, showing all comparisons, only those that resulted in
an error, or none.  The option <code>check_derivatives_tol</code> (default =
1e-04), determines when a difference between an analytic gradient and its
finite difference approximation is flagged as an error.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments that will be passed to the user-defined objective and
constraints functions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The return value contains a list with the inputs, and additional
elements</p>
<dl><dt>call</dt>
<dd><p>the call that was made to solve</p></dd>

<dt>status</dt>
<dd><p>integer value with the status of the optimization (0 is
success)</p></dd>

<dt>message</dt>
<dd><p>more informative message with the status of the optimization</p></dd>

<dt>iterations</dt>
<dd><p>number of iterations that were executed</p></dd>

<dt>objective</dt>
<dd><p>value if the objective function in the solution</p></dd>

<dt>solution</dt>
<dd><p>optimal value of the controls</p></dd>

<dt>version</dt>
<dd><p>version of NLopt that was used</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>NLopt addresses general nonlinear optimization problems of the form:</p>
<p>$$\min f(x)\quad x\in R^n$$</p>
<p>$$\textrm{s.t. }\\ g(x) \leq 0\\ h(x) = 0\\ lb \leq x \leq ub$$</p>
<p>where \(f(x)\) is the objective function to be minimized and \(x\)
represents the \(n\) optimization parameters. This problem may optionally
be subject to the bound constraints (also called box constraints), \(lb\)
and \(ub\). For partially or totally unconstrained problems the bounds can
take <code>-Inf</code> or <code>Inf</code>. One may also optionally have \(m\)
nonlinear inequality constraints (sometimes called a nonlinear programming
problem), which can be specified in \(g(x)\), and equality constraints that
can be specified in \(h(x)\). Note that not all of the algorithms in NLopt
can handle constraints.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>See <code><a href="nloptr-package.html">?`nloptr-package`</a></code> for an extended example.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Steven G. Johnson, The NLopt nonlinear-optimization package,
<a href="https://github.com/stevengj/nlopt" class="external-link">https://github.com/stevengj/nlopt</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="nloptr.print.options.html">nloptr.print.options</a></code>
<code><a href="check.derivatives.html">check.derivatives</a></code>
<code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim</a></code>
<code><a href="https://rdrr.io/r/stats/nlm.html" class="external-link">nlm</a></code>
<code><a href="https://rdrr.io/r/stats/nlminb.html" class="external-link">nlminb</a></code>
<code>Rsolnp::Rsolnp</code>
<code>Rsolnp::solnp</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Steven G. Johnson and others (C code) <br> Jelmer Ypma (R interface)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/astamm/nloptr" class="external-link">'nloptr'</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Rosenbrock Banana function and gradient in separate functions</span></span></span>
<span class="r-in"><span><span class="va">eval_f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">eval_grad_f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">400</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        <span class="fl">200</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># initial values</span></span></span>
<span class="r-in"><span><span class="va">x0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.2</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"algorithm"</span><span class="op">=</span><span class="st">"NLOPT_LD_LBFGS"</span>,</span></span>
<span class="r-in"><span>       <span class="st">"xtol_rel"</span><span class="op">=</span><span class="fl">1.0e-8</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># solve Rosenbrock Banana function</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">nloptr</span><span class="op">(</span>x0<span class="op">=</span><span class="va">x0</span>,</span></span>
<span class="r-in"><span>       eval_f<span class="op">=</span><span class="va">eval_f</span>,</span></span>
<span class="r-in"><span>       eval_grad_f<span class="op">=</span><span class="va">eval_grad_f</span>,</span></span>
<span class="r-in"><span>       opts<span class="op">=</span><span class="va">opts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nloptr(x0 = x0, eval_f = eval_f, eval_grad_f = eval_grad_f, opts = opts)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Minimization using NLopt version 2.7.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NLopt solver status: 1 ( NLOPT_SUCCESS: Generic success return value. )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Iterations....: 56 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Termination conditions:  xtol_rel: 1e-08 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of inequality constraints:  0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of equality constraints:    0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of objective function:  7.35727226897802e-23 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of controls: 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Rosenbrock Banana function and gradient in one function</span></span></span>
<span class="r-in"><span><span class="co"># this can be used to economize on calculations</span></span></span>
<span class="r-in"><span><span class="va">eval_f_list</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"objective"</span> <span class="op">=</span> <span class="fl">100</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>    <span class="st">"gradient"</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">400</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fl">200</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># solve Rosenbrock Banana function using an objective function that</span></span></span>
<span class="r-in"><span><span class="co"># returns a list with the objective value and its gradient</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">nloptr</span><span class="op">(</span>x0<span class="op">=</span><span class="va">x0</span>,</span></span>
<span class="r-in"><span>       eval_f<span class="op">=</span><span class="va">eval_f_list</span>,</span></span>
<span class="r-in"><span>       opts<span class="op">=</span><span class="va">opts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nloptr(x0 = x0, eval_f = eval_f_list, opts = opts)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Minimization using NLopt version 2.7.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NLopt solver status: 1 ( NLOPT_SUCCESS: Generic success return value. )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Iterations....: 56 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Termination conditions:  xtol_rel: 1e-08 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of inequality constraints:  0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of equality constraints:    0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of objective function:  7.35727226897802e-23 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of controls: 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example showing how to solve the problem from the NLopt tutorial.</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># min sqrt(x2)</span></span></span>
<span class="r-in"><span><span class="co"># s.t. x2 &gt;= 0</span></span></span>
<span class="r-in"><span><span class="co">#    x2 &gt;= (a1*x1 + b1)^3</span></span></span>
<span class="r-in"><span><span class="co">#    x2 &gt;= (a2*x1 + b2)^3</span></span></span>
<span class="r-in"><span><span class="co"># where</span></span></span>
<span class="r-in"><span><span class="co"># a1 = 2, b1 = 0, a2 = -1, b2 = 1</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># re-formulate constraints to be of form g(x) &lt;= 0</span></span></span>
<span class="r-in"><span><span class="co">#    (a1*x1 + b1)^3 - x2 &lt;= 0</span></span></span>
<span class="r-in"><span><span class="co">#    (a2*x1 + b2)^3 - x2 &lt;= 0</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/astamm/nloptr" class="external-link">'nloptr'</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># objective function</span></span></span>
<span class="r-in"><span><span class="va">eval_f0</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># constraint function</span></span></span>
<span class="r-in"><span><span class="va">eval_g0</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="op">(</span><span class="va">a</span><span class="op">*</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">b</span><span class="op">)</span><span class="op">^</span><span class="fl">3</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># gradient of objective function</span></span></span>
<span class="r-in"><span><span class="va">eval_grad_f0</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">.5</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Jacobian of constraint</span></span></span>
<span class="r-in"><span><span class="va">eval_jac_g0</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">*</span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">*</span><span class="op">(</span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">*</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">b</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1.0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">*</span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">*</span><span class="op">(</span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">*</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">b</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1.0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># functions with gradients in objective and constraint function</span></span></span>
<span class="r-in"><span><span class="co"># this can be useful if the same calculations are needed for</span></span></span>
<span class="r-in"><span><span class="co"># the function value and the gradient</span></span></span>
<span class="r-in"><span><span class="va">eval_f1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"objective"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="st">"gradient"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">.5</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">eval_g1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"constraints"</span><span class="op">=</span><span class="op">(</span><span class="va">a</span><span class="op">*</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">b</span><span class="op">)</span><span class="op">^</span><span class="fl">3</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>          <span class="st">"jacobian"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">*</span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">*</span><span class="op">(</span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">*</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">b</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1.0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">*</span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">*</span><span class="op">(</span><span class="va">a</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">*</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">b</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1.0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define parameters</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Solve using NLOPT_LD_MMA with gradient information supplied in separate</span></span></span>
<span class="r-in"><span><span class="co"># function.</span></span></span>
<span class="r-in"><span><span class="va">res0</span> <span class="op">&lt;-</span> <span class="fu">nloptr</span><span class="op">(</span>x0<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.234</span>,<span class="fl">5.678</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        eval_f<span class="op">=</span><span class="va">eval_f0</span>,</span></span>
<span class="r-in"><span>        eval_grad_f<span class="op">=</span><span class="va">eval_grad_f0</span>,</span></span>
<span class="r-in"><span>        lb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>,<span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        ub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">Inf</span>,<span class="cn">Inf</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        eval_g_ineq <span class="op">=</span> <span class="va">eval_g0</span>,</span></span>
<span class="r-in"><span>        eval_jac_g_ineq <span class="op">=</span> <span class="va">eval_jac_g0</span>,</span></span>
<span class="r-in"><span>        opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"algorithm"</span><span class="op">=</span><span class="st">"NLOPT_LD_MMA"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        a <span class="op">=</span> <span class="va">a</span>,</span></span>
<span class="r-in"><span>        b <span class="op">=</span> <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No termination criterion specified, using default(relative x-tolerance = 1e-04)</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nloptr(x0 = c(1.234, 5.678), eval_f = eval_f0, eval_grad_f = eval_grad_f0, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     lb = c(-Inf, 0), ub = c(Inf, Inf), eval_g_ineq = eval_g0, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     eval_jac_g_ineq = eval_jac_g0, opts = list(algorithm = "NLOPT_LD_MMA"), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a = a, b = b)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Minimization using NLopt version 2.7.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NLopt solver status: 4 ( NLOPT_XTOL_REACHED: Optimization stopped because </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xtol_rel or xtol_abs (above) was reached. )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Iterations....: 11 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Termination conditions:  relative x-tolerance = 1e-04 (DEFAULT) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of inequality constraints:  2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of equality constraints:    0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of objective function:  0.54433104762009 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of controls: 0.3333333 0.2962963</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Solve using NLOPT_LN_COBYLA without gradient information</span></span></span>
<span class="r-in"><span><span class="va">res1</span> <span class="op">&lt;-</span> <span class="fu">nloptr</span><span class="op">(</span>x0<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.234</span>,<span class="fl">5.678</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        eval_f<span class="op">=</span><span class="va">eval_f0</span>,</span></span>
<span class="r-in"><span>        lb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        ub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        eval_g_ineq <span class="op">=</span> <span class="va">eval_g0</span>,</span></span>
<span class="r-in"><span>        opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"algorithm"</span> <span class="op">=</span> <span class="st">"NLOPT_LN_COBYLA"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        a <span class="op">=</span> <span class="va">a</span>,</span></span>
<span class="r-in"><span>        b <span class="op">=</span> <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No termination criterion specified, using default(relative x-tolerance = 1e-04)</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nloptr(x0 = c(1.234, 5.678), eval_f = eval_f0, lb = c(-Inf, 0), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ub = c(Inf, Inf), eval_g_ineq = eval_g0, opts = list(algorithm = "NLOPT_LN_COBYLA"), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     a = a, b = b)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Minimization using NLopt version 2.7.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NLopt solver status: 4 ( NLOPT_XTOL_REACHED: Optimization stopped because </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xtol_rel or xtol_abs (above) was reached. )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Iterations....: 31 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Termination conditions:  relative x-tolerance = 1e-04 (DEFAULT) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of inequality constraints:  2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of equality constraints:    0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of objective function:  0.544242301658176 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of controls: 0.3333292 0.2961997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Solve using NLOPT_LD_MMA with gradient information in objective function</span></span></span>
<span class="r-in"><span><span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu">nloptr</span><span class="op">(</span>x0<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.234</span>, <span class="fl">5.678</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        eval_f<span class="op">=</span><span class="va">eval_f1</span>,</span></span>
<span class="r-in"><span>        lb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        ub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        eval_g_ineq <span class="op">=</span> <span class="va">eval_g1</span>,</span></span>
<span class="r-in"><span>        opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"algorithm"</span><span class="op">=</span><span class="st">"NLOPT_LD_MMA"</span>,</span></span>
<span class="r-in"><span>              <span class="st">"check_derivatives"</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        a <span class="op">=</span> <span class="va">a</span>,</span></span>
<span class="r-in"><span>        b <span class="op">=</span> <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No termination criterion specified, using default(relative x-tolerance = 1e-04)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Checking gradients of objective function.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Derivative checker results: 0 error(s) detected.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   eval_grad_f[1] = 0.000000e+00 ~ 0.000000e+00   [0.000000e+00]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   eval_grad_f[2] = 2.098323e-01 ~ 2.098323e-01   [1.422937e-09]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Checking gradients of inequality constraints.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Derivative checker results: 0 error(s) detected.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   eval_jac_g_ineq[1, 1] =  3.654614e+01 ~  3.654614e+01   [1.667794e-08]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   eval_jac_g_ineq[2, 1] = -1.642680e-01 ~ -1.642680e-01   [2.103453e-07]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   eval_jac_g_ineq[1, 2] = -1.000000e+00 ~ -1.000000e+00   [0.000000e+00]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   eval_jac_g_ineq[2, 2] = -1.000000e+00 ~ -1.000000e+00   [0.000000e+00]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nloptr(x0 = c(1.234, 5.678), eval_f = eval_f1, lb = c(-Inf, 0), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ub = c(Inf, Inf), eval_g_ineq = eval_g1, opts = list(algorithm = "NLOPT_LD_MMA", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         check_derivatives = TRUE), a = a, b = b)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Minimization using NLopt version 2.7.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NLopt solver status: 4 ( NLOPT_XTOL_REACHED: Optimization stopped because </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> xtol_rel or xtol_abs (above) was reached. )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of Iterations....: 11 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Termination conditions:  relative x-tolerance = 1e-04 (DEFAULT) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of inequality constraints:  2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of equality constraints:    0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of objective function:  0.54433104762009 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal value of controls: 0.3333333 0.2962963</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jelmer Ypma, Steven G. Johnson, Aymeric Stamm.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

