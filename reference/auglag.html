<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Augmented Lagrangian Algorithm — auglag • nloptr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Augmented Lagrangian Algorithm — auglag"><meta name="description" content="The Augmented Lagrangian method adds additional terms to the unconstrained
objective function, designed to emulate a Lagrangian multiplier."><meta property="og:description" content="The Augmented Lagrangian method adds additional terms to the unconstrained
objective function, designed to emulate a Lagrangian multiplier."><meta property="og:image" content="https://astamm.github.io/nloptr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nloptr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nloptr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://astamm.github.io/posts/2024-06-19-nloptr-210/">nloptr 2.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/astamm/nloptr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Augmented Lagrangian Algorithm</h1>
      <small class="dont-index">Source: <a href="https://github.com/astamm/nloptr/blob/master/R/auglag.R" class="external-link"><code>R/auglag.R</code></a></small>
      <div class="d-none name"><code>auglag.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The Augmented Lagrangian method adds additional terms to the unconstrained
objective function, designed to emulate a Lagrangian multiplier.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">auglag</span><span class="op">(</span></span>
<span>  <span class="va">x0</span>,</span>
<span>  <span class="va">fn</span>,</span>
<span>  gr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lower <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  upper <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hinjac <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heqjac <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  localsolver <span class="op">=</span> <span class="st">"COBYLA"</span>,</span>
<span>  localtol <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  ineq2local <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nl.info <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  deprecatedBehavior <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x-">x0<a class="anchor" aria-label="anchor" href="#arg-x-"></a></dt>
<dd><p>starting point for searching the optimum.</p></dd>


<dt id="arg-fn">fn<a class="anchor" aria-label="anchor" href="#arg-fn"></a></dt>
<dd><p>objective function that is to be minimized.</p></dd>


<dt id="arg-gr">gr<a class="anchor" aria-label="anchor" href="#arg-gr"></a></dt>
<dd><p>gradient of the objective function; will be provided provided is
<code>NULL</code> and the solver requires derivatives.</p></dd>


<dt id="arg-lower-upper">lower, upper<a class="anchor" aria-label="anchor" href="#arg-lower-upper"></a></dt>
<dd><p>lower and upper bound constraints.</p></dd>


<dt id="arg-hin-hinjac">hin, hinjac<a class="anchor" aria-label="anchor" href="#arg-hin-hinjac"></a></dt>
<dd><p>defines the inequality constraints, <code>hin(x) &gt;= 0</code></p></dd>


<dt id="arg-heq-heqjac">heq, heqjac<a class="anchor" aria-label="anchor" href="#arg-heq-heqjac"></a></dt>
<dd><p>defines the equality constraints, <code>heq(x) = 0</code>.</p></dd>


<dt id="arg-localsolver">localsolver<a class="anchor" aria-label="anchor" href="#arg-localsolver"></a></dt>
<dd><p>available local solvers: COBYLA, LBFGS, MMA, or SLSQP.</p></dd>


<dt id="arg-localtol">localtol<a class="anchor" aria-label="anchor" href="#arg-localtol"></a></dt>
<dd><p>tolerance applied in the selected local solver.</p></dd>


<dt id="arg-ineq-local">ineq2local<a class="anchor" aria-label="anchor" href="#arg-ineq-local"></a></dt>
<dd><p>logical; shall the inequality constraints be treated by
the local solver?; not possible at the moment.</p></dd>


<dt id="arg-nl-info">nl.info<a class="anchor" aria-label="anchor" href="#arg-nl-info"></a></dt>
<dd><p>logical; shall the original NLopt info been shown.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>list of options, see <code>nl.opts</code> for help.</p></dd>


<dt id="arg-deprecatedbehavior">deprecatedBehavior<a class="anchor" aria-label="anchor" href="#arg-deprecatedbehavior"></a></dt>
<dd><p>logical; if <code>TRUE</code> (default for now), the old
behavior of the Jacobian function is used, where the equality is \(\ge 0\)
instead of \(\le 0\). This will be reversed in a future release and
eventually removed.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed to the function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List with components:</p>
<dl><dt>par</dt>
<dd><p>the optimal solution found so far.</p></dd>

<dt>value</dt>
<dd><p>the function value corresponding to <code>par</code>.</p></dd>

<dt>iter</dt>
<dd><p>number of (outer) iterations, see <code>maxeval</code>.</p></dd>

<dt>global_solver</dt>
<dd><p>the global NLOPT solver used.</p></dd>

<dt>local_solver</dt>
<dd><p>the local NLOPT solver used, LBFGS or COBYLA.</p></dd>

<dt>convergence</dt>
<dd><p>integer code indicating successful completion
(&gt; 0) or a possible error number (&lt; 0).</p></dd>

<dt>message</dt>
<dd><p>character string produced by NLopt and giving additional
information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This method combines the objective function and the nonlinear
inequality/equality constraints (if any) in to a single function:
essentially, the objective plus a `penalty' for any violated constraints.</p>
<p>This modified objective function is then passed to another optimization
algorithm with no nonlinear constraints. If the constraints are violated by
the solution of this sub-problem, then the size of the penalties is
increased and the process is repeated; eventually, the process must converge
to the desired solution (if it exists).</p>
<p>Since all of the actual optimization is performed in this subsidiary
optimizer, the subsidiary algorithm that you specify determines whether the
optimization is gradient-based or derivative-free.</p>
<p>The local solvers available at the moment are <code>COBYLA'' (for the derivative-free approach) and </code>LBFGS”, <code>MMA'', or </code>SLSQP” (for smooth
functions). The tolerance for the local solver has to be provided.</p>
<p>There is a variant that only uses penalty functions for equality constraints
while inequality constraints are passed through to the subsidiary algorithm
to be handled directly; in this case, the subsidiary algorithm must handle
inequality constraints.  (At the moment, this variant has been turned off
because of problems with the NLOPT library.)</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Birgin and Martinez provide their own free implementation of the
method as part of the TANGO project; other implementations can be found in
semi-free packages like LANCELOT.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Andrew R. Conn, Nicholas I. M. Gould, and Philippe L. Toint, “A
globally convergent augmented Lagrangian algorithm for optimization with
general constraints and simple bounds,” SIAM J. Numer. Anal. vol. 28, no.
2, p. 545-572 (1991).</p>
<p>E. G. Birgin and J. M. Martinez, “Improving ultimate convergence of an
augmented Lagrangian method," Optimization Methods and Software vol. 23, no.
2, p. 177-195 (2008).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>alabama::auglag</code>, <code>Rsolnp::solnp</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Hans W. Borchers</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="fl">2</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="va">hin</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">0.25</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">-</span> <span class="fl">1</span>  <span class="co"># hin &lt;= 0</span></span></span>
<span class="r-in"><span><span class="va">heq</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>           <span class="co"># heq = 0</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="nl.grad.html">nl.grad</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">hinjac</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="nl.grad.html">nl.jacobian</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">hin</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">heqjac</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="nl.grad.html">nl.jacobian</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">heq</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with COBYLA</span></span></span>
<span class="r-in"><span><span class="fu">auglag</span><span class="op">(</span><span class="va">x0</span>, <span class="va">fn</span>, gr <span class="op">=</span> <span class="cn">NULL</span>, hin <span class="op">=</span> <span class="va">hin</span>, heq <span class="op">=</span> <span class="va">heq</span>, deprecatedBehavior <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $par</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8228755 0.9114379</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.393465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $global_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LN_AUGLAG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $local_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LN_COBYLA"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $convergence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $message</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_MAXEVAL_REACHED: Optimization stopped because maxeval (above) was reached."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># $par:   0.8228761 0.9114382</span></span></span>
<span class="r-in"><span><span class="co"># $value:   1.393464</span></span></span>
<span class="r-in"><span><span class="co"># $iter:  1001</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">auglag</span><span class="op">(</span><span class="va">x0</span>, <span class="va">fn</span>, gr <span class="op">=</span> <span class="cn">NULL</span>, hin <span class="op">=</span> <span class="va">hin</span>, heq <span class="op">=</span> <span class="va">heq</span>, localsolver <span class="op">=</span> <span class="st">"SLSQP"</span>,</span></span>
<span class="r-in"><span>       deprecatedBehavior <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $par</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8228757 0.9114378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.393465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $global_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LD_AUGLAG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $local_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LD_SLSQP"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $convergence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $message</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># $par:   0.8228757 0.9114378</span></span></span>
<span class="r-in"><span><span class="co"># $value:   1.393465</span></span></span>
<span class="r-in"><span><span class="co"># $iter   184</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##  Example from the alabama::auglag help page</span></span></span>
<span class="r-in"><span><span class="co">##  Parameters should be roughly (0, 0, 1) with an objective value of 1.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">4</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="va">heq</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="co"># hin restated from alabama example to be &lt;= 0.</span></span></span>
<span class="r-in"><span><span class="va">hin</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">6</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="fl">4</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">^</span> <span class="fl">3</span> <span class="op">+</span> <span class="fl">3</span>, <span class="op">-</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="op">-</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="op">-</span><span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">auglag</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>, <span class="va">fn</span>, hin <span class="op">=</span> <span class="va">hin</span>, heq <span class="op">=</span> <span class="va">heq</span>, localsolver<span class="op">=</span> <span class="st">"lbfgs"</span>,</span></span>
<span class="r-in"><span>       deprecatedBehavior <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $par</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4.861756e-08 4.732373e-08 9.999999e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $global_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LD_AUGLAG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $local_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LD_LBFGS"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $convergence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $message</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># $par:   4.861756e-08 4.732373e-08 9.999999e-01</span></span></span>
<span class="r-in"><span><span class="co"># $value:   1</span></span></span>
<span class="r-in"><span><span class="co"># $iter:  145</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##  Powell problem from the Rsolnp::solnp help page</span></span></span>
<span class="r-in"><span><span class="co">##  Parameters should be roughly (-1.7171, 1.5957, 1.8272, -0.7636, -0.7636)</span></span></span>
<span class="r-in"><span><span class="co">##  with an objective value of 0.0539498478.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn1</span>  <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eqn1</span> <span class="op">&lt;-</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">-</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">-</span> <span class="fl">5</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>    <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">auglag</span><span class="op">(</span><span class="va">x0</span>, <span class="va">fn1</span>, heq <span class="op">=</span> <span class="va">eqn1</span>, localsolver <span class="op">=</span> <span class="st">"mma"</span>, deprecatedBehavior <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $par</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -1.7172821  1.5958701  1.8269884 -0.7636277 -0.7636277</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.05394986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $iter</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 932</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $global_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LD_AUGLAG"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $local_solver</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_LD_MMA"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $convergence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $message</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># $par: -1.7173645  1.5959655  1.8268352 -0.7636185 -0.7636185</span></span></span>
<span class="r-in"><span><span class="co"># $value:   0.05394987</span></span></span>
<span class="r-in"><span><span class="co"># $iter:  916</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jelmer Ypma, Steven G. Johnson, Aymeric Stamm.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

